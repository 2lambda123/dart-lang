Problems reported:

parser/record/metadata:2:17: Variables must be declared using the keywords 'const', 'final', 'var' or a type name.
@metadata(x, y) a;
                ^

parser/record/metadata:4:20: Variables must be declared using the keywords 'const', 'final', 'var' or a type name.
@metadata<T>(x, y) a;
                   ^

parser/record/metadata:6:21: Variables must be declared using the keywords 'const', 'final', 'var' or a type name.
@metadata <T>(x, y) a;
                    ^

parser/record/metadata:22:11: Expected a declaration, but got '('.
@metadata (x, y)
          ^

parser/record/metadata:22:12: Variables must be declared using the keywords 'const', 'final', 'var' or a type name.
@metadata (x, y)
           ^

parser/record/metadata:22:15: Expected ';' after this.
@metadata (x, y)
              ^

parser/record/metadata:22:16: Expected a declaration, but got ')'.
@metadata (x, y)
               ^

beginCompilationUnit(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      beginArguments(()
        handleIdentifier(x, expression)
        handleNoTypeArguments(,)
        handleNoArguments(,)
        handleSend(x, ,)
        handleIdentifier(y, expression)
        handleNoTypeArguments())
        handleNoArguments())
        handleSend(y, ))
      endArguments(2, (, ))
    endMetadata(@, null, a)
  endMetadataStar(1)
  beginTopLevelMember(a)
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, ))
      handleRecoverableError(MissingConstFinalVarOrType, a, a)
      handleNoType())
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, a, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      beginTypeArguments(<)
        handleIdentifier(T, typeReference)
        handleNoTypeArguments(>)
        handleType(T, null)
      endTypeArguments(1, <, >)
      beginArguments(()
        handleIdentifier(x, expression)
        handleNoTypeArguments(,)
        handleNoArguments(,)
        handleSend(x, ,)
        handleIdentifier(y, expression)
        handleNoTypeArguments())
        handleNoArguments())
        handleSend(y, ))
      endArguments(2, (, ))
    endMetadata(@, null, a)
  endMetadataStar(1)
  beginTopLevelMember(a)
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, ))
      handleRecoverableError(MissingConstFinalVarOrType, a, a)
      handleNoType())
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, a, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      beginTypeArguments(<)
        handleIdentifier(T, typeReference)
        handleNoTypeArguments(>)
        handleType(T, null)
      endTypeArguments(1, <, >)
      beginArguments(()
        handleIdentifier(x, expression)
        handleNoTypeArguments(,)
        handleNoArguments(,)
        handleSend(x, ,)
        handleIdentifier(y, expression)
        handleNoTypeArguments())
        handleNoArguments())
        handleSend(y, ))
      endArguments(2, (, ))
    endMetadata(@, null, a)
  endMetadataStar(1)
  beginTopLevelMember(a)
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, ))
      handleRecoverableError(MissingConstFinalVarOrType, a, a)
      handleNoType())
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, a, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, metadata)
      beginRecordType(()
        beginRecordTypeEntry()
          beginMetadataStar(x)
          endMetadataStar(0)
          handleIdentifier(x, typeReference)
          handleNoTypeArguments(,)
          handleType(x, null)
          handleNoName(,)
        endRecordTypeEntry()
        beginRecordTypeEntry()
          beginMetadataStar(y)
          endMetadataStar(0)
          handleIdentifier(y, typeReference)
          handleNoTypeArguments())
          handleType(y, null)
          handleNoName())
        endRecordTypeEntry()
      endRecordType((, null, 2, false)
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, (, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, metadata)
      beginRecordType(()
        beginRecordTypeEntry()
          beginMetadataStar(x)
          endMetadataStar(0)
          handleIdentifier(x, typeReference)
          handleNoTypeArguments(,)
          handleType(x, null)
          handleNoName(,)
        endRecordTypeEntry()
        beginRecordTypeEntry()
          beginMetadataStar(y)
          endMetadataStar(0)
          handleIdentifier(y, typeReference)
          handleNoTypeArguments())
          handleType(y, null)
          handleNoName())
        endRecordTypeEntry()
      endRecordType((, null, 2, false)
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, (, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, metadata)
      beginRecordType(()
        beginRecordTypeEntry()
          beginMetadataStar(x)
          endMetadataStar(0)
          handleIdentifier(x, typeReference)
          handleNoTypeArguments(,)
          handleType(x, null)
          handleNoName(,)
        endRecordTypeEntry()
        beginRecordTypeEntry()
          beginMetadataStar(y)
          endMetadataStar(0)
          handleIdentifier(y, typeReference)
          handleNoTypeArguments())
          handleType(y, null)
          handleNoName())
        endRecordTypeEntry()
      endRecordType((, null, 2, false)
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, (, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, metadata)
      beginRecordType(()
        beginRecordTypeEntry()
          beginMetadataStar(x)
          endMetadataStar(0)
          handleIdentifier(x, typeReference)
          handleNoTypeArguments(,)
          handleType(x, null)
          handleNoName(,)
        endRecordTypeEntry()
      endRecordType((, null, 1, false)
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, (, ;)
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      handleNoTypeArguments(()
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    handleRecoverableError(Message[ExpectedDeclaration, Expected a declaration, but got '('., null, {lexeme: (}], (, ()
    handleInvalidTopLevelDeclaration(()
  endTopLevelDeclaration(x)
  beginMetadataStar(x)
  endMetadataStar(0)
  beginTopLevelMember(x)
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, ()
      handleRecoverableError(MissingConstFinalVarOrType, x, x)
      handleNoType(()
      handleIdentifier(x, topLevelVariableDeclaration)
      handleNoFieldInitializer(,)
      handleIdentifier(y, topLevelVariableDeclaration)
      handleNoFieldInitializer())
      handleRecoverableError(Message[ExpectedAfterButGot, Expected ';' after this., null, {string: ;}], y, y)
    endTopLevelFields(null, null, null, null, null, 2, x, ;)
  endTopLevelDeclaration())
  beginMetadataStar())
  endMetadataStar(0)
  beginTopLevelMember())
    handleRecoverableError(Message[ExpectedDeclaration, Expected a declaration, but got ')'., null, {lexeme: )}], ), ))
    handleInvalidTopLevelDeclaration())
  endTopLevelDeclaration(class)
  beginMetadataStar(class)
  endMetadataStar(0)
  beginClassOrMixinOrNamedMixinApplicationPrelude(class)
    handleIdentifier(C, classOrMixinDeclaration)
    handleNoTypeVariables({)
    beginClassDeclaration(class, null, null, null, null, null, null, C)
      handleNoType(C)
      handleClassExtends(null, 1)
      handleClassNoWithClause()
      handleImplements(null, 0)
      handleClassHeader(class, class, null)
      beginClassOrMixinOrExtensionBody(DeclarationKind.Class, {)
      endClassOrMixinOrExtensionBody(DeclarationKind.Class, 0, {, })
    endClassDeclaration(class, })
  endTopLevelDeclaration(@)
  beginMetadataStar(@)
    beginMetadata(@)
      handleIdentifier(metadata, metadataReference)
      beginTypeArguments(<)
        handleIdentifier(T, typeReference)
        handleNoTypeArguments(>)
        handleType(T, null)
      endTypeArguments(1, <, >)
      handleNoArguments(()
    endMetadata(@, null, ()
  endMetadataStar(1)
  beginTopLevelMember(()
    beginFields(DeclarationKind.TopLevel, null, null, null, null, null, null, null, >)
      beginRecordType(()
        beginRecordTypeEntry()
          beginMetadataStar(x)
          endMetadataStar(0)
          handleIdentifier(x, typeReference)
          handleNoTypeArguments(,)
          handleType(x, null)
          handleNoName(,)
        endRecordTypeEntry()
        beginRecordTypeEntry()
          beginMetadataStar(y)
          endMetadataStar(0)
          handleIdentifier(y, typeReference)
          handleNoTypeArguments())
          handleType(y, null)
          handleNoName())
        endRecordTypeEntry()
      endRecordType((, null, 2, false)
      handleIdentifier(a, topLevelVariableDeclaration)
      handleNoFieldInitializer(;)
    endTopLevelFields(null, null, null, null, null, 1, (, ;)
  endTopLevelDeclaration()
endCompilationUnit(12, )
